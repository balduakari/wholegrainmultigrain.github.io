<!DOCTYPE html>
<html>
  <head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.11/p5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.11/addons/p5.dom.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.11/addons/p5.sound.min.js"></script>
    <script src="bower_components/gyronorm/dist/gyronorm.complete.min.js"></script>
  <style> body {padding: 0; margin: 0;} </style>
  </head>
  <body>
    <script type="text/javascript">

    //
    var gn = new GyroNorm();

    window.addEventListener("deviceorientation", function(event) {
    // process event.alpha, event.beta and event.gamma
  }, true);

  window.ondeviceorientation = function(event) {
    // process event.alpha, event.beta and event.gamma
  }

    //
    gn.init().then(function(){
      gn.start(function(data){
        alpha = data.do.alpha;
        beta = data.do.beta;
        dmx = data.dm.x;
        dmy = data.dm.y;
        // Process:
        // data.do.alpha	( deviceorientation event alpha value )
        // data.do.beta		( deviceorientation event beta value )
        // data.do.gamma	( deviceorientation event gamma value )
        // data.do.absolute	( deviceorientation event absolute value )

        // data.dm.x		( devicemotion event acceleration x value )
        // data.dm.y		( devicemotion event acceleration y value )
        // data.dm.z		( devicemotion event acceleration z value )

        // data.dm.gx		( devicemotion event accelerationIncludingGravity x value )
        // data.dm.gy		( devicemotion event accelerationIncludingGravity y value )
        // data.dm.gz		( devicemotion event accelerationIncludingGravity z value )

        // data.dm.alpha	( devicemotion event rotationRate alpha value )
        // data.dm.beta		( devicemotion event rotationRate beta value )
        // data.dm.gamma	( devicemotion event rotationRate gamma value )
        //



        //
      })
    })
    //

    function setup() {
        createCanvas(750, 1334, WEBGL);
        print("setup function!");
    }

    function draw() {
        background(0);
        rotateX(frameCount * 0.01 * alpha);
        rotateY(frameCount * 0.01);
        ambientLight(100, 10, 180);
        //rotateZ(frameCount*0.01);
        //pointLight(0, 255, 255);
        //ambientLight(115, 20, 180); //even red light across our objects

        var dirY = (mouseY / height - 0.5) * 2;
        var dirX = (mouseX / width - 0.5) * 2;
        directionalLight(115, 20, 180, dirX, -dirY, 0.25);
        ambientMaterial(250);

        torus(30, 7);
        torus(60, 7);
        torus(90, 7);
        torus(120, 7);
        //sphere(30);

        console.log("draw function");
    }

</script>
  </body>
</html>
